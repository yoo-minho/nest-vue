<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Teamlog</title>
    <meta name="description" content="We log together!" />
    <link rel="icon" href="/favicon.ico" />
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" sizes="180x180" />
    <link rel="mask-icon" href="/mask-icon.svg" color="#FFFFFF" />
    <meta name="theme-color" content="#ffffff" />

    <!-- <script>
      (function () {
        var w = window;
        if (w.Jettabus) {
          return (window.console.error || window.console.log || function () {})('Jettabus script included twice.');
        }
        var guid = function () {
          return 'JB-' + Math.random() * 16;
        };
        var d = window.document;
        var jb = function () {
          jb.c(arguments);
        };
        jb.q = [];
        jb.c = function (args) {
          jb.q.push(args);
        };
        w.Jettabus = jb;
        function l() {
          if (w.JettabusInitialized) {
            return;
          }
          w.JettabusInitialized = true;
          var s = document.createElement('script');
          s.type = 'text/javascript';
          s.async = true;
          s.src = 'https://jettabus.io/plugin/jettabus-plugin.js?guid=' + guid();
          s.charset = 'UTF-8';
          var x = document.getElementsByTagName('script')[0];
          x.parentNode.insertBefore(s, x);
        }
        if (document.readyState === 'complete') {
          l();
        } else if (window.attachEvent) {
          window.attachEvent('onload', l);
        } else {
          window.addEventListener('DOMContentLoaded', l, false);
          window.addEventListener('load', l, false);
        }
      })();
      Jettabus('ticket', 'JB-q6UvbL2dbw3i7Cr99Wwf');
    </script> -->
    <style>
      .d-none {
        display: none;
      }
    </style>
  </head>
  <body>
    <button class="js-install d-none">install</button>
    <div id="app"></div>

    <script
      src="https://t1.kakaocdn.net/kakao_js_sdk/2.0.0/kakao.min.js"
      integrity="sha384-PFHeU/4gvSH8kpvhrigAPfZGBDPs372JceJq3jAXce11bVA6rMvGWzvP4fMQuBGL"
      crossorigin="anonymous"
    ></script>
    <script>
      Kakao.init('e9c455e800755b2e3bb767bdedbf372d');
    </script>
    <script>
      const showInstallPromotion = () => document.querySelector('.js-install').classList.remove('d-none');
      const hideInstallPromotion = () => document.querySelector('.js-install').classList.add('d-none');
      let deferredPrompt;
      window.addEventListener('beforeinstallprompt', (e) => {
        // Prevent the mini-infobar from appearing on mobile
        e.preventDefault();
        // Stash the event so it can be triggered later.
        deferredPrompt = e;
        // Update UI notify the user they can install the PWA
        showInstallPromotion();
        // Optionally, send analytics event that PWA install promo was shown.
        console.log(`'beforeinstallprompt' event was fired.`);
      });
      window.addEventListener('appinstalled', () => {
        // Hide the app-provided install promotion
        hideInstallPromotion();
        // Clear the deferredPrompt so it can be garbage collected
        deferredPrompt = null;
        // Optionally, send analytics event to indicate successful install
        console.log('PWA was installed');
      });
      document.querySelector('.js-install').addEventListener('click', async () => {
        // Hide the app provided install promotion
        hideInstallPromotion();
        // Show the install prompt
        deferredPrompt.prompt();
        // Wait for the user to respond to the prompt
        const { outcome } = await deferredPrompt.userChoice;
        // Optionally, send analytics event with outcome of user choice
        console.log(`User response to the install prompt: ${outcome}`);
        // We've used the prompt, and can't use it again, throw it away
        deferredPrompt = null;
      });
    </script>
    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
